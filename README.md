# Project Gadgets

[![AppVeyor](https://ci.appveyor.com/api/projects/status/github/dunbit/project-gadgets?svg=true)](https://ci.appveyor.com/project/stevenceuppens/project-gadgets)
[![GolangCI](https://golangci.com/badges/github.com/dunbit/project-gadgets.svg)](https://golangci.com/r/github.com/dunbit/project-gadgets)
[![Go Report Card](https://goreportcard.com/badge/github.com/dunbit/project-gadgets)](https://goreportcard.com/report/github.com/dunbit/project-gadgets)
[![codecov](https://codecov.io/gh/dunbit/project-gadgets/branch/master/graph/badge.svg)](https://codecov.io/gh/dunbit/project-gadgets)
[![Release](https://img.shields.io/github/release/dunbit/project-gadgets.svg?style=flat-square)](https://github.com/dunbit/project-gadgets/releases/latest)

## Tools

### check-license

#### Install
Execute the following command to quickly install the check-license binary.

```bash
go get -u github.com/dunbit/project-gadgets/cmd/check-license
```

#### Usage

##### Validate Command
To validate the license headers in source files, run check-license with validate command.
```bash
check-license validate -config ./path/to/config.yaml 
```
The command will: 
- Exit(0) - When all licenses are matching template.
- Exit(1) - When one or more licenses are not matching template. Console message will display which files failed.

##### Version Command
To know the build version run:
```bash
check-license version
```

##### Config file
Example YAML config file:
```bash
check-license validate -config ./path/to/config.yaml 
```

```yaml
license:
    path: "./template.txt"     # Path to the license template
files:
    - match: "*.go"             # Define Extension
      comment: "//"             # Define comment style
    - match: "Makefile"         # Define Filename
      comment: "#"              # Define comment style
excludes:
    - "./api/**/*.pb.go"        # Exclude files generated by protoc compiler
    - "./vendor"                # Exclude vendor packages
```

Example JSON config file:
```bash
check-license validate -config ./path/to/config.json 
```
```json
{
  "license": {
    "path": "./template.txt"
  },
  "files": [
    {
      "match": "*.go",
      "comment": "//"
    },
    {
      "match": "Makefile",
      "comment": "#"
    }
  ],
  "excludes": [
    "./api/**/*.pb.go",
    "./vendor"
  ]
}
```